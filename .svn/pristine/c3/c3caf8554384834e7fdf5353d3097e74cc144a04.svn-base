<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mingyuansoftware.aifactory.mapper.SalesReturnDetailsMapper" >
  <resultMap id="BaseResultMap" type="com.mingyuansoftware.aifactory.model.SalesReturnDetails" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="sales_return_details_id" property="salesReturnDetailsId" jdbcType="INTEGER" />
    <result column="sales_return_id" property="salesReturnId" jdbcType="INTEGER" />
    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
    <result column="unit_price" property="unitPrice" jdbcType="DECIMAL" />
    <result column="lot_number" property="lotNumber" jdbcType="VARCHAR" />
    <result column="total_price" property="totalPrice" jdbcType="DECIMAL" />
    <result column="customs_category" property="customsCategory" jdbcType="VARCHAR" />
    <result column="sea_tariff_number" property="seaTariffNumber" jdbcType="VARCHAR" />
    <result column="comment" property="comment" jdbcType="VARCHAR" />
    <result column="arrived_quantity" property="arrivedQuantity" jdbcType="DECIMAL" />
    <result column="no_arrived_quantity" property="noArrivedQuantity" jdbcType="DECIMAL" />
    <result column="quantity" property="quantity" jdbcType="DECIMAL" />
    <association column="goods_id" property="goods"
                 select="com.mingyuansoftware.aifactory.mapper.GoodsMapper.selectByPrimaryKey"></association>
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from sales_return_details
    where sales_return_details_id = #{salesReturnDetailsId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.mingyuansoftware.aifactory.model.SalesReturnDetails" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey resultType="java.lang.Integer" keyProperty="salesReturnDetailsId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into sales_return_details (sales_return_id, goods_id,unit_price, lot_number,
      total_price, customs_category, sea_tariff_number, 
      `comment`, arrived_quantity, no_arrived_quantity
      )
    values (#{salesReturnId,jdbcType=INTEGER}, #{goodsId,jdbcType=INTEGER},#{unitPrice,jdbcType=DECIMAL}, #{lotNumber,jdbcType=VARCHAR},
      #{totalPrice,jdbcType=DECIMAL}, #{customsCategory,jdbcType=VARCHAR}, #{seaTariffNumber,jdbcType=VARCHAR}, 
      #{comment,jdbcType=VARCHAR}, #{arrivedQuantity,jdbcType=DECIMAL}, #{noArrivedQuantity,jdbcType=DECIMAL}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.mingyuansoftware.aifactory.model.SalesReturnDetails" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update sales_return_details
    set sales_return_id = #{salesReturnId,jdbcType=INTEGER},
      goods_id = #{goodsId,jdbcType=INTEGER},
      unit_price = #{unitPrice,jdbcType=DECIMAL},
      lot_number = #{lotNumber,jdbcType=VARCHAR},
      total_price = #{totalPrice,jdbcType=DECIMAL},
      customs_category = #{customsCategory,jdbcType=VARCHAR},
      sea_tariff_number = #{seaTariffNumber,jdbcType=VARCHAR},
      `comment` = #{comment,jdbcType=VARCHAR},
      arrived_quantity = #{arrivedQuantity,jdbcType=DECIMAL},
      no_arrived_quantity = #{noArrivedQuantity,jdbcType=DECIMAL}
    where sales_return_details_id = #{salesReturnDetailsId,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select sales_return_details_id, sales_return_id, goods_id, unit_price, lot_number, total_price,
    customs_category, sea_tariff_number, `comment`, arrived_quantity, no_arrived_quantity
    from sales_return_details
    where sales_return_details_id = #{salesReturnDetailsId,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select sales_return_details_id, sales_return_id, goods_id,unit_price, lot_number, total_price,
    customs_category, sea_tariff_number, `comment`, arrived_quantity, no_arrived_quantity
    from sales_return_details
  </select>

  <select id="selectSalesReturnDetailsById" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select sales_return_details_id, sales_return_id, goods_id, unit_price, lot_number, total_price,
    customs_category, sea_tariff_number, `comment`, (arrived_quantity+no_arrived_quantity)as quantity
    from sales_return_details
    where sales_return_id = #{salesReturnId}
  </select>

  <update id="updateQuantity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update sales_return_details
    set
    arrived_quantity = #{quantity},
    no_arrived_quantity = 0
    where sales_return_details_id = #{salesReturnDetailsId,jdbcType=INTEGER}
  </update>

</mapper>