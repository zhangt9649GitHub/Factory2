<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mingyuansoftware.aifactory.mapper.ProductionInstructionMapper" >
  <resultMap id="BaseResultMap" type="com.mingyuansoftware.aifactory.model.ProductionInstruction" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="production_instruction_id" property="productionInstructionId" jdbcType="INTEGER" />
    <result column="serial_number" property="serialNumber" jdbcType="VARCHAR" />
    <result column="state" property="state" jdbcType="TINYINT" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="comment" property="comment" jdbcType="VARCHAR" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from production_instruction
    where production_instruction_id = #{productionInstructionId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.mingyuansoftware.aifactory.model.ProductionInstruction" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey resultType="java.lang.Integer" keyProperty="productionInstructionId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into production_instruction (serial_number, `state`, create_time, 
      update_time, `comment`
      )
    values (#{serialNumber,jdbcType=VARCHAR}, #{state,jdbcType=TINYINT}, #{createTime,jdbcType=TIMESTAMP}, 
      #{updateTime,jdbcType=TIMESTAMP}, #{comment,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.mingyuansoftware.aifactory.model.ProductionInstruction" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update production_instruction
    set serial_number = #{serialNumber,jdbcType=VARCHAR},
      `state` = #{state,jdbcType=TINYINT},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      `comment` = #{comment,jdbcType=VARCHAR}
    where production_instruction_id = #{productionInstructionId,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select production_instruction_id, serial_number, `state`, create_time, update_time, 
    `comment`
    from production_instruction
    where production_instruction_id = #{productionInstructionId,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select production_instruction_id, serial_number, `state`, create_time, update_time, 
    `comment`
    from production_instruction
  </select>

  <select id="selectProductionInstructionList" resultMap="BaseResultMap" parameterType="com.mingyuansoftware.aifactory.model.dto.ProductionInstructionDto">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select production_instruction_id, serial_number, `state`, create_time, update_time,
    `comment`
    from production_instruction
    <where>
      <if test="productionInstructionDto.serialNumber != null and productionInstructionDto.serialNumber != ''">
        AND serial_number like "%"#{productionInstructionDto.serialNumber}"%"
      </if>
      <if test="productionInstructionDto.createTime != null and productionInstructionDto.createTime != ''">
        AND create_time like "%"#{productionInstructionDto.createTime}"%"
      </if>
      <if test="productionInstructionDto.state != null and productionInstructionDto.state  != ''">
        AND `state`  = #{productionInstructionDto.state}
      </if>
    </where>
    ORDER BY production_instruction_id DESC
  </select>

  <select id="selectCountProductionInstruction" resultType="java.lang.Integer" parameterType="com.mingyuansoftware.aifactory.model.dto.ProductionInstructionDto">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select COUNT(production_instruction_id)
    from production_instruction
    <where>
      <if test="productionInstructionDto.serialNumber != null and productionInstructionDto.serialNumber != ''">
        AND serial_number like "%"#{productionInstructionDto.serialNumber}"%"
      </if>
      <if test="productionInstructionDto.createTime != null and productionInstructionDto.createTime != ''">
        AND create_time like "%"#{productionInstructionDto.createTime}"%"
      </if>
      <if test="productionInstructionDto.state != null and productionInstructionDto.state  != ''">
        AND `state`  = #{productionInstructionDto.state}
      </if>
    </where>
    ORDER BY production_instruction_id DESC
  </select>

  <update id="updateProductionInstructionById" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update production_instruction
    set
    update_time = now(),
    is_delete = 1
    where production_instruction_id = #{productionInstructionId,jdbcType=INTEGER}
  </update>

  <update id="updateSerialNumberByProductionInstructionId">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update production_instruction
    set serial_number = #{serialNumber,jdbcType=VARCHAR}
    where production_instruction_id = #{productionInstructionId,jdbcType=INTEGER}
  </update>

  <select id="selectSerialNumber" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select COUNT(production_instruction_id)
    from production_instruction
    where serial_number = #{serialNumber}
  </select>

  <select id="selectSerialNumberList" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select production_instruction_id, serial_number, `state`, create_time, update_time,
    `comment`
    from production_instruction
    where `state` &lt; 3
  </select>

  <select id="selectUnfinishList" resultType="com.mingyuansoftware.aifactory.model.ProductionProcess" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select production_instruction_id, serial_number, `state`, create_time, update_time,
    `comment`
    from production_instruction
    where `state` &lt; 3
    ORDER BY production_instruction_id ASC
  </select>


</mapper>